<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STIP Admin Panel</title>
    <!-- Firebase 9 Compat SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <style>
        * { font-family: 'Arial', sans-serif; }
        body { background: #f5f5f5; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; border-bottom: 3px solid #3498db; padding-bottom: 10px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; color: #333; }
        input, textarea, select { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 6px; font-size: 16px; }
        input:focus, textarea:focus { border-color: #3498db; outline: none; }
        button { background: #2ecc71; color: white; border: none; padding: 14px 28px; border-radius: 6px; font-size: 16px; cursor: pointer; font-weight: bold; }
        button:hover { background: #27ae60; }
        .login-box { max-width: 400px; margin: 80px auto; text-align: center; }
        .message { padding: 15px; margin: 15px 0; border-radius: 6px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .logout-btn { background: #e74c3c; float: right; }
        .logout-btn:hover { background: #c0392b; }
        .tabs { display: flex; background: #ecf0f1; border-radius: 6px; margin-bottom: 25px; }
        .tab { flex: 1; text-align: center; padding: 15px; cursor: pointer; font-weight: bold; }
        .tab.active { background: #3498db; color: white; border-radius: 6px; }
        .tab-content { display: none; padding: 20px; border: 2px solid #ecf0f1; border-radius: 6px; }
        .tab-content.active { display: block; }
        ul { list-style: none; padding: 0; }
        li { background: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 6px; border-left: 4px solid #3498db; }
    </style>
</head>
<body>
    <!-- ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú -->
    <div id="loginContainer" class="container login-box">
        <h1>üîê STIP Admin ‡¶≤‡¶ó‡¶á‡¶®</h1>
        <div class="form-group">
            <label>‡¶á‡¶Æ‡ßá‡¶á‡¶≤:</label>
            <input type="email" id="email" placeholder="admin@stip.com">
        </div>
        <div class="form-group">
            <label>‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°:</label>
            <input type="password" id="password" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°">
        </div>
        <button onclick="login()">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <div id="loginMessage" class="message"></div>
    </div>

    <!-- Admin ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° (‡¶≤‡¶ó‡¶á‡¶®‡ßá‡¶∞ ‡¶™‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá) -->
    <div id="adminPanel" class="container" style="display:none;">
        <button class="logout-btn" onclick="logout()">üö™ ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü</button>
        <h1>üìä STIP Admin ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°</h1>
        
        <div class="tabs">
            <div class="tab active" onclick="showTab('notice')">üì¢ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó</div>
            <div class="tab" onclick="showTab('course')">üìö ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶Ø‡ßã‡¶ó</div>
            <div class="tab" onclick="showTab('view')">üëÅÔ∏è ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</div>
        </div>

        <!-- ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶´‡¶∞‡ßç‡¶Æ -->
        <div id="noticeTab" class="tab-content active">
            <h2>‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <div class="form-group">
                <label>‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="noticeTitle" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶≠‡¶∞‡ßç‡¶§‡¶ø ‡¶ö‡¶≤‡¶õ‡ßá">
            </div>
            <div class="form-group">
                <label>‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§:</label>
                <textarea id="noticeDetails" rows="4" placeholder="‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."></textarea>
            </div>
            <div class="form-group">
                <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:</label>
                <input type="date" id="noticeDate">
            </div>
            <div class="form-group">
                <label>‡¶ß‡¶∞‡¶®:</label>
                <select id="noticeType">
                    <option value="‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ">‚ö†Ô∏è ‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂</option>
                    <option value="‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£">üì¢ ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂</option>
                    <option value="‡¶õ‡ßÅ‡¶ü‡¶ø">üéâ ‡¶õ‡ßÅ‡¶ü‡¶ø‡¶∞ ‡¶ò‡ßã‡¶∑‡¶£‡¶æ</option>
                </select>
            </div>
            <button onclick="addNotice()">‚úÖ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∂ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <div id="noticeMessage" class="message"></div>
        </div>

        <!-- ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶´‡¶∞‡ßç‡¶Æ -->
        <div id="courseTab" class="tab-content">
            <h2>‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <div class="form-group">
                <label>‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ:</label>
                <input type="text" id="courseName" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ü‡ßá‡¶á‡¶≤‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶è‡¶®‡ßç‡¶° ‡¶°‡ßç‡¶∞‡ßá‡¶∏ ‡¶Æ‡ßá‡¶ï‡¶ø‡¶Ç">
            </div>
            <div class="form-group">
                <label>‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶:</label>
                <input type="text" id="courseDuration" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡ß¨ ‡¶Æ‡¶æ‡¶∏">
            </div>
            <div class="form-group">
                <label>‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</label>
                <textarea id="courseDescription" rows="4" placeholder="‡¶ï‡ßã‡¶∞‡ßç‡¶∏‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§..."></textarea>
            </div>
            <div class="form-group">
                <label>‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶´‡¶ø (‡¶ü‡¶æ‡¶ï‡¶æ‡¶Ø‡¶º):</label>
                <input type="number" id="courseFee" placeholder="5000">
            </div>
            <button onclick="addCourse()">‚úÖ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            <div id="courseMessage" class="message"></div>
        </div>

        <!-- ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≠‡¶ø‡¶â -->
        <div id="viewTab" class="tab-content">
            <h2>üìã ‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡¶∏‡¶Æ‡ßÇ‡¶π</h2>
            <div id="noticesList"></div>
            
            <h2>üéì ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
            <div id="coursesList"></div>
        </div>
    </div>

    <script>
        // ================ FIREBASE CONFIGURATION ================
        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase ‡¶ï‡ßã‡¶° ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
        const firebaseConfig = {
            apiKey: "AIzaSyDM8hdUMULgPMkCLdXHHp-Qa34EYh6knH4",
            authDomain: "stip-admin-a320d.firebaseapp.com",
            projectId: "stip-admin-a320d",
            storageBucket: "stip-admin-a320d.firebasestorage.app",
            messagingSenderId: "727484755058",
            appId: "1:727484755058:web:738175d1cf3590fb0d26eb"
        };

        // Firebase ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();

        // ================ FUNCTIONS ================
        // ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                showMessage('loginMessage', '‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®', 'error');
                return;
            }
            
            showMessage('loginMessage', '‡¶≤‡¶ó‡¶á‡¶® ‡¶π‡¶ö‡ßç‡¶õ‡ßá...', 'success');
            
            auth.signInWithEmailAndPassword(email, password)
                .then(() => {
                    document.getElementById('loginContainer').style.display = 'none';
                    document.getElementById('adminPanel').style.display = 'block';
                    loadData();
                    showMessage('loginMessage', '‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶´‡¶≤!', 'success');
                })
                .catch((error) => {
                    showMessage('loginMessage', '‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ' + error.message, 'error');
                });
        }

        // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
        function addNotice() {
            const title = document.getElementById('noticeTitle').value;
            const details = document.getElementById('noticeDetails').value;
            const date = document.getElementById('noticeDate').value || new Date().toISOString().split('T')[0];
            const type = document.getElementById('noticeType').value;
            
            if (!title || !details) {
                showMessage('noticeMessage', '‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®', 'error');
                return;
            }
            
            const notice = {
                title: title,
                details: details,
                date: date,
                type: type,
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };

            db.collection("notices").add(notice)
                .then(() => {
                    showMessage('noticeMessage', '‚úÖ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!', 'success');
                    document.getElementById('noticeTitle').value = '';
                    document.getElementById('noticeDetails').value = '';
                    loadData();
                })
                .catch((error) => {
                    showMessage('noticeMessage', '‚ùå ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: ' + error.message, 'error');
                });
        }

        // ‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
        function loadData() {
            // ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶≤‡ßã‡¶°
            db.collection("notices").orderBy("timestamp", "desc").limit(10)
                .get()
                .then((querySnapshot) => {
                    let html = '<ul>';
                    if (querySnapshot.empty) {
                        html = '<p>‡¶ï‡ßã‡¶®‡ßã ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶®‡ßá‡¶á‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>';
                    } else {
                        querySnapshot.forEach((doc) => {
                            const data = doc.data();
                            html += `<li>
                                <strong>${data.title}</strong><br>
                                <small>üìÖ ${data.date} | üìå ${data.type}</small><br>
                                ${data.details}
                            </li>`;
                        });
                        html += '</ul>';
                    }
                    document.getElementById('noticesList').innerHTML = html;
                });

            // ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶≤‡ßã‡¶°
            db.collection("courses").get()
                .then((querySnapshot) => {
                    let html = '<ul>';
                    if (querySnapshot.empty) {
                        html = '<p>‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶®‡ßá‡¶á‡•§ ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡ßã‡¶∞‡ßç‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§</p>';
                    } else {
                        querySnapshot.forEach((doc) => {
                            const data = doc.data();
                            html += `<li>
                                <strong>${data.name}</strong><br>
                                <small>‚è±Ô∏è ${data.duration} | üí∞ ${data.fee || '‡ß¶'} ‡¶ü‡¶æ‡¶ï‡¶æ</small><br>
                                ${data.description}
                            </li>`;
                        });
                        html += '</ul>';
                    }
                    document.getElementById('coursesList').innerHTML = html;
                });
        }

        // ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        function showTab(tabName) {
            // ‡¶∏‡¶¨ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
            document.getElementById(tabName + 'Tab').classList.add('active');
            event.target.classList.add('active');
        }

        // ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü
        function logout() {
            auth.signOut().then(() => {
                document.getElementById('adminPanel').style.display = 'none';
                document.getElementById('loginContainer').style.display = 'block';
                showMessage('loginMessage', '‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá', 'success');
            });
        }

        // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶∂‡ßã
        function showMessage(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="message ${type}">${message}</div>`;
            setTimeout(() => {
                element.innerHTML = '';
            }, 5000);
        }

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶á‡¶® ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
        auth.onAuthStateChanged((user) => {
            if (user) {
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadData();
            }
        });

        // ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡¶∏‡¶æ‡¶®
        document.getElementById('noticeDate').valueAsDate = new Date();
    </script>
</body>
</html>